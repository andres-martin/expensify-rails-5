<% if @expense.errors.empty? %>
    $("#product-modal").on("ajax:success", () => {
        $('table tbody').append('<%= j render 'row', expense: @expense %>');
        $("#product-modal").remove();
        $('.modal-backdrop').remove();
        $('body').removeClass('modal-open')
    });

<% else %>
    const addErrorStyles = (name) => {
        $(`#${name} label`).addClass('text-danger');
        $(`#${name} input`).addClass('error');
    }

    const arrErrors = []; 
    const errors = {};

    <% @expense.errors.full_messages.each do |error| %>
     arrErrors.push("<%= error.html_safe %>");
    <% end %>
    console.log(arrErrors);

    arrErrors.forEach((error) => {
        let errorArray = error.split(' ');
        let key = errorArray[0].toLowerCase();
        let errorMsg = errorArray.slice(1).join(" ");

        errors[key] = errors[key] || errorMsg;

        addErrorStyles(key);
        $(`#${key} p`).text(`${errors[key]}`).show();
    });

<% end %>
